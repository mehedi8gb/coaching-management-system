<?php

use Illuminate\Support\Facades\Schema;
use Illuminate\Database\Schema\Blueprint;
use Illuminate\Database\Migrations\Migration;

class CreateInfixModuleStudentParentInfosTable extends Migration
{
    /**
     * Run the migrations.
     *
     * @return void
     */
    public function up()
    {
        Schema::create('infix_module_student_parent_infos', function (Blueprint $table) {
            $table->increments('id');
            
            $table->integer('module_id')->nullable();

            $table->integer('parent_id')->nullable()->default(0);

            $table->string('name')->nullable();
            $table->string('route')->nullable();
            $table->tinyInteger('active_status')->default(1);
            $table->integer('created_by')->nullable()->default(1)->unsigned();
            $table->foreign('created_by')->references('id')->on('users')->onDelete('cascade');

            $table->integer('updated_by')->nullable()->default(1)->unsigned();
            $table->foreign('updated_by')->references('id')->on('users')->onDelete('cascade');

            $table->integer('school_id')->nullable()->default(1)->unsigned();
            $table->foreign('school_id')->references('id')->on('sm_schools')->onDelete('cascade');

            $table->integer('type')->nullable()->comment('1 for module, 2 for module link, 3 for module options');
            $table->integer('user_type')->nullable()->comment('1 for student, 2 for parent');
            
            $table->timestamps();
        });

        DB::statement('SET foreign_key_checks=0');
        DB::table('infix_module_student_parent_infos')->truncate();
        DB::statement('SET foreign_key_checks=1');

        $sql = "INSERT INTO `infix_module_student_parent_infos` (`id`, `module_id`, `parent_id`, `type`, `user_type`, `name`, `route`, `active_status`, `created_by`, `updated_by`, `school_id`, `created_at`, `updated_at`) VALUES
        -- student Dashboard
        (1, 1, 0, '1', 1, 'Dashboard Menu','', 1, 1, 1, 1, '2019-07-25 02:21:21', '2019-07-25 04:24:22'),
        (2, 1, 1, '3', 1, 'Subject','', 1, 1, 1, 1, '2019-07-25 02:21:21', '2019-07-25 04:24:22'),
        (3, 1, 1, '3', 1, 'Notice','', 1, 1, 1, 1, '2019-07-25 02:21:21', '2019-07-25 04:24:22'),
        (4, 1, 1, '3', 1, 'Exam','', 1, 1, 1, 1, '2019-07-25 02:21:21', '2019-07-25 04:24:22'),
        (5, 1, 1, '3', 1, 'Online Exam','', 1, 1, 1, 1, '2019-07-25 02:21:21', '2019-07-25 04:24:22'),
        (6, 1, 1, '3', 1, 'Teachers','', 1, 1, 1, 1, '2019-07-25 02:21:21', '2019-07-25 04:24:22'),
        (7, 1, 1, '3', 1, 'Issued books','', 1, 1, 1, 1, '2019-07-25 02:21:21', '2019-07-25 04:24:22'),
        (8, 1, 1, '3', 1, 'Pending homeworks','', 1, 1, 1, 1, '2019-07-25 02:21:21', '2019-07-25 04:24:22'),
        (9, 1, 1, '3', 1, 'attendance in current month','', 1, 1, 1, 1, '2019-07-25 02:21:21', '2019-07-25 04:24:22'),
        (10, 1, 1, '3', 1, 'Calendar','', 1, 1, 1, 1, '2019-07-25 02:21:21', '2019-07-25 04:24:22'),

        -- student Profile
        (11, 2, 0, '1', 1, 'My Profile','', 1, 1, 1, 1, '2019-07-25 02:21:21', '2019-07-25 04:24:22'),
        (12, 2, 11, '2', 1, 'Profile','', 1, 1, 1, 1, '2019-07-25 02:21:21', '2019-07-25 04:24:22'),
        (13, 2, 11, '2', 1, 'Fees','', 1, 1, 1, 1, '2019-07-25 02:21:21', '2019-07-25 04:24:22'),
        (14, 2, 11, '2', 1, 'Exam','', 1, 1, 1, 1, '2019-07-25 02:21:21', '2019-07-25 04:24:22'),
        (15, 2, 11, '2', 1, 'Document','', 1, 1, 1, 1, '2019-07-25 02:21:21', '2019-07-25 04:24:22'),
        (16, 2, 15, '3', 1, 'Upload','', 1, 1, 1, 1, '2019-07-25 02:21:21', '2019-07-25 04:24:22'),
        (17, 2, 15, '3', 1, 'download','', 1, 1, 1, 1, '2019-07-25 02:21:21', '2019-07-25 04:24:22'),
        (18, 2, 15, '3', 1, 'delete','', 1, 1, 1, 1, '2019-07-25 02:21:21', '2019-07-25 04:24:22'),
        (19, 2, 11, '2', 1, 'Timeline','', 1, 1, 1, 1, '2019-07-25 02:21:21', '2019-07-25 04:24:22'),

        -- Student Fees
        (20, 3, 0, '1', 1, 'Fees','', 1, 1, 1, 1, '2019-07-25 02:21:21', '2019-07-25 04:24:22'),
        (21, 3, 20, '2', 1, 'Pay Fees','', 1, 1, 1, 1, '2019-07-25 02:21:21', '2019-07-25 04:24:22'),

        -- Student Class Routine
        (22, 4, 0, '1', 1, 'Class Routine','', 1, 1, 1, 1, '2019-07-25 02:21:21', '2019-07-25 04:24:22'),
        
        -- Student Homework List
        (23, 5, 0, '1', 1, 'Homework List','', 1, 1, 1, 1, '2019-07-25 02:21:21', '2019-07-25 04:24:22'),
        (24, 5, 23, '2', 1, 'View','', 1, 1, 1, 1, '2019-07-25 02:21:21', '2019-07-25 04:24:22'),
        (25, 5, 23, '2', 1, 'Add Content','', 1, 1, 1, 1, '2019-07-25 02:21:21', '2019-07-25 04:24:22'),

        -- Student Download Center
        (26, 6, 0, '1', 1, 'Download Center','', 1, 1, 1, 1, '2019-07-25 02:21:21', '2019-07-25 04:24:22'),

        (27, 6, 26, '2', 1, 'Assignment','', 1, 1, 1, 1, '2019-07-25 02:21:21', '2019-07-25 04:24:22'),
        (28, 6, 27, '3', 1, 'Download','', 1, 1, 1, 1, '2019-07-25 02:21:21', '2019-07-25 04:24:22'),
        (29, 6, 26, '2', 1, 'Study Material','', 1, 1, 1, 1, '2019-07-25 02:21:21', '2019-07-25 04:24:22'),
        (30, 6, 29, '3', 1, 'Download','', 1, 1, 1, 1, '2019-07-25 02:21:21', '2019-07-25 04:24:22'),

        (31, 6, 26, '2', 1, 'Syllabus','', 1, 1, 1, 1, '2019-07-25 02:21:21', '2019-07-25 04:24:22'),
        (32, 6, 31, '3', 1, 'Download','', 1, 1, 1, 1, '2019-07-25 02:21:21', '2019-07-25 04:24:22'),
        (33, 6, 26, '2', 1, 'Other Downloads','', 1, 1, 1, 1, '2019-07-25 02:21:21', '2019-07-25 04:24:22'),
        (34, 6, 33, '3', 1, 'Download','', 1, 1, 1, 1, '2019-07-25 02:21:21', '2019-07-25 04:24:22'),

        -- Student Attendance
        (35, 7, 0, '1', 1, 'Attendance','', 1, 1, 1, 1, '2019-07-25 02:21:21', '2019-07-25 04:24:22'),

        -- Student Examination
        (36, 8, 0, '1', 1, 'Examination','', 1, 1, 1, 1, '2019-07-25 02:21:21', '2019-07-25 04:24:22'),
        (37, 8, 36, '2', 1, 'Result','', 1, 1, 1, 1, '2019-07-25 02:21:21', '2019-07-25 04:24:22'),
        (38, 8, 36, '2', 1, 'Exam Schedule','', 1, 1, 1, 1, '2019-07-25 02:21:21', '2019-07-25 04:24:22'),

        -- Student Leave
        (39, 9, 0, '1', 1, 'Leave','', 1, 1, 1, 1, '2019-07-25 02:21:21', '2019-07-25 04:24:22'),
        (40, 9, 39, '2', 1, 'Apply Leave','', 1, 1, 1, 1, '2019-07-25 02:21:21', '2019-07-25 04:24:22'),
        (41, 9, 40, '3', 1, 'Save','', 1, 1, 1, 1, '2019-07-25 02:21:21', '2019-07-25 04:24:22'),
        (42, 9, 40, '3', 1, 'Edit','', 1, 1, 1, 1, '2019-07-25 02:21:21', '2019-07-25 04:24:22'),
        (44, 9, 39, '2', 1, 'Pending Leave','', 1, 1, 1, 1, '2019-07-25 02:21:21', '2019-07-25 04:24:22'),

        -- Student Online Exam
        (45, 10, 0, '1', 1, 'Online Exam','', 1, 1, 1, 1, '2019-07-25 02:21:21', '2019-07-25 04:24:22'),
        (46, 10, 45, '2', 1, 'Active Exams','', 1, 1, 1, 1, '2019-07-25 02:21:21', '2019-07-25 04:24:22'),
        (47, 10, 45, '2', 1, 'View Results','', 1, 1, 1, 1, '2019-07-25 02:21:21', '2019-07-25 04:24:22'),

        -- Student Notice Board
        (48, 11, 0, '1', 1, 'Notice Board','', 1, 1, 1, 1, '2019-07-25 02:21:21', '2019-07-25 04:24:22'),

        -- Student Subject
        (49, 12, 0, '1', 1, 'Subject','', 1, 1, 1, 1, '2019-07-25 02:21:21', '2019-07-25 04:24:22'),

        -- Student Teachers List
        (50, 13, 0, '1', 1, 'Teachers List','', 1, 1, 1, 1, '2019-07-25 02:21:21', '2019-07-25 04:24:22'),

        -- Student Library
        (51, 14, 0, '1', 1, 'Library','', 1, 1, 1, 1, '2019-07-25 02:21:21', '2019-07-25 04:24:22'),
        (52, 14, 51, '2', 1, 'Book List','', 1, 1, 1, 1, '2019-07-25 02:21:21', '2019-07-25 04:24:22'),
        (53, 14, 51, '2', 1, 'Book Issued','', 1, 1, 1, 1, '2019-07-25 02:21:21', '2019-07-25 04:24:22'),

        -- Student Transport
        (54, 15, 0, '1', 1, 'Transport','', 1, 1, 1, 1, '2019-07-25 02:21:21', '2019-07-25 04:24:22'),

        -- Student Dormitory
        (55, 16, 0, '1', 1, 'Dormitory','', 1, 1, 1, 1, '2019-07-25 02:21:21', '2019-07-25 04:24:22'),


        -- Parent Dashboard
        (56, 1, 0, '1', 2, 'Dashboard Menu','', 1, 1, 1, 1, '2019-07-25 02:21:21', '2019-07-25 04:24:22'),
        (57, 1, 56, '3', 2, 'Subject','', 1, 1, 1, 1, '2019-07-25 02:21:21', '2019-07-25 04:24:22'),
        (58, 1, 56, '3', 2, 'Notice','', 1, 1, 1, 1, '2019-07-25 02:21:21', '2019-07-25 04:24:22'),
        (59, 1, 56, '3', 2, 'Exam','', 1, 1, 1, 1, '2019-07-25 02:21:21', '2019-07-25 04:24:22'),
        (60, 1, 56, '3', 2, 'Online Exam','', 1, 1, 1, 1, '2019-07-25 02:21:21', '2019-07-25 04:24:22'),
        (61, 1, 56, '3', 2, 'Teachers','', 1, 1, 1, 1, '2019-07-25 02:21:21', '2019-07-25 04:24:22'),
        (62, 1, 56, '3', 2, 'Issued books','', 1, 1, 1, 1, '2019-07-25 02:21:21', '2019-07-25 04:24:22'),
        (63, 1, 56, '3', 2, 'Pending homeworks','', 1, 1, 1, 1, '2019-07-25 02:21:21', '2019-07-25 04:24:22'),
        (64, 1, 56, '3', 2, 'attendance in current month','', 1, 1, 1, 1, '2019-07-25 02:21:21', '2019-07-25 04:24:22'),
        (65, 1, 56, '3', 2, 'Calendar','', 1, 1, 1, 1, '2019-07-25 02:21:21', '2019-07-25 04:24:22'),
        -- Parent Profile
        (66, 2, 0, '1', 2, 'My Children','', 1, 1, 1, 1, '2019-07-25 02:21:21', '2019-07-25 04:24:22'),
        (67, 2, 66, '2', 2, 'Profile','', 1, 1, 1, 1, '2019-07-25 02:21:21', '2019-07-25 04:24:22'),
        (68, 2, 66, '2', 2, 'Fees','', 1, 1, 1, 1, '2019-07-25 02:21:21', '2019-07-25 04:24:22'),
        (69, 2, 66, '2', 2, 'Exam','', 1, 1, 1, 1, '2019-07-25 02:21:21', '2019-07-25 04:24:22'),
        (70, 2, 66, '2', 2, 'Timeline','', 1, 1, 1, 1, '2019-07-25 02:21:21', '2019-07-25 04:24:22'),

        -- Parent Fees
        (71, 3, 0, '1', 2, 'Fees','', 1, 1, 1, 1, '2019-07-25 02:21:21', '2019-07-25 04:24:22'),
        
        -- Parent Class Routine
        (72, 4, 0, '1', 2, 'Class Routine','', 1, 1, 1, 1, '2019-07-25 02:21:21', '2019-07-25 04:24:22'),

        -- Parent HomeWork 
        (73, 5, 0, '1', 2, 'HomeWork ','', 1, 1, 1, 1, '2019-07-25 02:21:21', '2019-07-25 04:24:22'),
        (74, 5, 73, '3', 2, 'View','', 1, 1, 1, 1, '2019-07-25 02:21:21', '2019-07-25 04:24:22'),

        -- Parent Attendance 
        (75, 6, 0, '1', 2, 'Attendance ','', 1, 1, 1, 1, '2019-07-25 02:21:21', '2019-07-25 04:24:22'),
        
        -- Parent Exam
        (76, 7, 0, '1', 2, 'Exam ','', 1, 1, 1, 1, '2019-07-25 02:21:21', '2019-07-25 04:24:22'),
        (77, 7, 76, '2', 2, 'Exam Result','', 1, 1, 1, 1, '2019-07-25 02:21:21', '2019-07-25 04:24:22'),
        (78, 7, 76, '2', 2, 'Exam Schedule','', 1, 1, 1, 1, '2019-07-25 02:21:21', '2019-07-25 04:24:22'),
        (79, 7, 76, '2', 2, 'Online Exam','', 1, 1, 1, 1, '2019-07-25 02:21:21', '2019-07-25 04:24:22'),

        -- Parent Leave
        (80, 8, 0, '1', 2, 'Leave','', 1, 1, 1, 1, '2019-07-25 02:21:21', '2019-07-25 04:24:22'),
        (81, 8, 80, '2', 2, 'Apply Leave','', 1, 1, 1, 1, '2019-07-25 02:21:21', '2019-07-25 04:24:22'),
        (82, 8, 81, '3', 2, 'Save','', 1, 1, 1, 1, '2019-07-25 02:21:21', '2019-07-25 04:24:22'),
        (83, 8, 81, '3', 2, 'Edit','', 1, 1, 1, 1, '2019-07-25 02:21:21', '2019-07-25 04:24:22'),
        (84, 8, 80, '2', 2, 'Pending Leave','', 1, 1, 1, 1, '2019-07-25 02:21:21', '2019-07-25 04:24:22'),

        -- Parent Notice Board
        (85, 9, 0, '1', 2, 'Notice Board','', 1, 1, 1, 1, '2019-07-25 02:21:21', '2019-07-25 04:24:22'),

        -- Parent Subject
        (86, 10, 0, '1', 2, 'Subject','', 1, 1, 1, 1, '2019-07-25 02:21:21', '2019-07-25 04:24:22'),

        -- Parent Teachers List
        (87, 11, 0, '1', 2, 'Teachers List','', 1, 1, 1, 1, '2019-07-25 02:21:21', '2019-07-25 04:24:22'),

        -- Parent Library
        (88, 12, 0, '1', 2, 'Library','', 1, 1, 1, 1, '2019-07-25 02:21:21', '2019-07-25 04:24:22'),
        (89, 12, 88, '2', 2, 'Book List','', 1, 1, 1, 1, '2019-07-25 02:21:21', '2019-07-25 04:24:22'),
        (90, 12, 88, '2', 2, 'Book Issued','', 1, 1, 1, 1, '2019-07-25 02:21:21', '2019-07-25 04:24:22'),

        -- Parent Transport
        (91, 13, 0, '1', 2, 'Transport','', 1, 1, 1, 1, '2019-07-25 02:21:21', '2019-07-25 04:24:22'),

        -- Parent Dormitory
        (92, 14, 0, '1', 2, 'Dormitory','', 1, 1, 1, 1, '2019-07-25 02:21:21', '2019-07-25 04:24:22'),


        -- Student Leave Missing
        (93, 9, 40, '3', 1, 'View','', 1, 1, 1, 1, '2019-07-25 02:21:21', '2019-07-25 04:24:22'),
        (94, 9, 40, '3', 1, 'Delete','', 1, 1, 1, 1, '2019-07-25 02:21:21', '2019-07-25 04:24:22'),

        -- Parent Leave Missing
        (95, 8, 81, '3', 2, 'View','', 1, 1, 1, 1, '2019-07-25 02:21:21', '2019-07-25 04:24:22'),
        (96, 8, 81, '3', 2, 'Delete','', 1, 1, 1, 1, '2019-07-25 02:21:21', '2019-07-25 04:24:22')



         ";
        // End Reports Menu
        DB::insert($sql);
    }

    /**
     * Reverse the migrations.
     *
     * @return void
     */
    public function down()
    {
        Schema::dropIfExists('infix_module_student_parent_infos');
    }
}